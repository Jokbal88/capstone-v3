{% load static tailwind_tags %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <link
      rel="shortcut icon"
      type="x-icon"
      href="{% static 'images/CTU_logo.png' %}"
    />
    <title>
      {% block title %}HealthHub Connect{% endblock %}
    </title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="{% static 'styles/fontawesome-free-6.5.2-web/css/all.min.css' %}"
    />
    {% tailwind_css %}
    <link rel="stylesheet" href="{% static 'styles/base.css' %}" />
    {% block extra_css %}{% endblock %}
  </head>
  <body>
    <main
      class="relative overflow-hidden min-h-screen {% if user.is_superuser or user.is_staff %}xs:flex xs:flex-col lg:flex-row {% else %} flex flex-col{% endif %}"
      style="background-color:#e5f2ff"
    >
      <nav
        id="navbar"
        class="bg-[#fff] sticky top-0 z-10
          {% if user.is_superuser or user.is_staff %}
            flex xs:flex-row xs:justify-between lg:justify-normal lg:flex-col xs:w-full lg:w-[25%]
          {% else %}
            flex justify-between h-[5rem]
          {% endif %}
        "
      >
        <div
          class="flex gap-2 p-4 items-stretch bg-[#3b82f6] {% if user.is_superuser or user.is_staff %} justify-center {% else %} justify-normal {% endif %}"
        >
          <img
            class="h-full {% if user.is_superuser or user.is_staff %} size-14 {% else %} size-min {% endif %}"
            src="{% static 'images/CTU_logo.png' %}"
          />
          <h1
            class="font-bold text-[1.3rem] self-center tracking-tight text-white"
          >
            HealthHub Connect
          </h1>
        </div>
        <ul
          class="{% if user.is_superuser or user.is_staff %} xs:hidden lg:flex overflow-hidden{% else %} flex flex-row w-full justify-between items-center{% endif %}"
        >
          {% if user.is_superuser or user.is_staff %}
          <div class="h-full w-full flex flex-col overflow-auto scrollbar-hide">
            <li>
            <a
              class="flex justify-center items-center h-full tracking-tight hover:bg-[#f0f0f0] py-4 font-medium hover:border-r-[4px] hover:border-[#3b82f6] transition-all {% if request.resolver_match.url_name == 'admin_dashboard' %}bg-[#f0f0f0] lg:border-[#3b82f6] lg:border-r-[4px] {% endif %}"
              href="{% url 'main:admin_dashboard' %}"
              >Dashboard</a
            >
          </li>
          <li>
            <a
              class="flex justify-center items-center h-full tracking-tight hover:bg-[#f0f0f0] py-4 font-medium hover:border-r-[4px] hover:border-[#3b82f6] transition-all {% if request.resolver_match.url_name == 'patient_profile' %}bg-[#f0f0f0] lg:border-[#3b82f6] lg:border-r-[4px] {% endif %}"
              href="{% url 'medical:patient_profile' %}"
              >Patient Profile</a
            >
          </li>
          <li>
            <a
              class="flex justify-center items-center h-full tracking-tight hover:bg-[#f0f0f0] py-4 font-medium hover:border-r-[4px] hover:border-[#3b82f6] transition-all {% if request.resolver_match.url_name == 'viewrequest' %}bg-[#f0f0f0] lg:border-[#3b82f6] lg:border-r-[4px] {% endif %}"
              href="{% url 'medical:viewrequest' %}"
              >View Requests</a
            >
          </li>
          <li>
            <a
              class="flex justify-center items-center text-center h-full tracking-tight hover:bg-[#f0f0f0] py-4 font-medium hover:border-r-[4px] hover:border-[#3b82f6] transition-all {% if request.resolver_match.url_name == 'medtracker' %}bg-[#f0f0f0] lg:border-[#3b82f6] lg:border-r-[4px] {% endif %}"
              href="{% url 'medical:medtracker' %}"
              >Medical Requirements Tracker</a
            >
          </li>
          <li>
            <a
              class="flex justify-center items-center text-center h-full tracking-tight hover:bg-[#f0f0f0] py-4 font-medium hover:border-r-[4px] hover:border-[#3b82f6] transition-all {% if request.resolver_match.url_name == 'emergency_asst' %}bg-[#f0f0f0] lg:border-[#3b82f6] lg:border-r-[4px] {% endif %}"
              href="{% url 'medical:emergency_asst' %}"
              >Emergency Health Assistance</a
            >
          </li>
          <li>
            <a
              class="flex justify-center items-center h-full tracking-tight hover:bg-[#f0f0f0] py-4 font-medium hover:border-r-[4px] hover:border-[#3b82f6] transition-all"
              href="{% url 'medical:pwdlist' %}"
              >PWD Profile</a
            >
          </li>
          <li>
            <a
              class="flex justify-center items-center h-full tracking-tight hover:bg-[#f0f0f0] py-4 font-medium hover:border-r-[4px] hover:border-[#3b82f6] transition-all {% if request.resolver_match.url_name == 'dentalrequest' %}bg-[#f0f0f0] lg:border-[#3b82f6] lg:border-r-[4px] {% endif %}"
              href="{% url 'medical:dentalrequest' %}"
              >Dental Services</a
            >
          </li>
          <li>
            <a
              class="flex justify-center items-center h-full tracking-tight hover:bg-[#f0f0f0] py-4 font-medium hover:border-r-[4px] hover:border-[#3b82f6] transition-all {% if request.resolver_match.url_name == 'prescription' %}bg-[#f0f0f0] lg:border-[#3b82f6] lg:border-r-[4px] {% endif %}"
              href="{% url 'medical:prescription' %}"
              >Prescription Issuance</a
            >
          </li>
          <li>
            <a
              class="flex justify-center items-center h-full tracking-tight hover:bg-[#f0f0f0] py-4 font-medium hover:border-r-[4px] hover:border-[#3b82f6] transition-all {% if request.resolver_match.url_name == 'transactions' %}bg-[#f0f0f0] lg:border-[#3b82f6] lg:border-r-[4px] {% endif %}"
              href="{% url 'medical:transactions' %}"
              >Transaction Reports</a
            >
          </li>
          <li>
            <a
              class="flex justify-center items-center h-full tracking-tight hover:bg-[#f0f0f0] py-4 font-medium hover:border-r-[4px] hover:border-[#3b82f6] transition-all"
              href="{% url 'medical:mental_health' %}"
              >Mental Health Services</a
            >
          </li>
          <li class="mt-auto">
            <a href="{% url 'main:logout' %}"
               class="flex justify-center items-center h-full tracking-tight hover:bg-[#f0f0f0] py-4 font-medium hover:border-r-[4px] hover:border-[#3b82f6] transition-all">
                Logout
            </a>
          </li>
          </div>

          {% else %}
          <li class="h-full transition-all hover:bg-[#f0f0f0] text-center hover:border-b-[4px] hover:border-[#3b82f6] {% if request.resolver_match.url_name == 'student_dashboard' %}border-[#3b82f6] border-b-[4px] bg-[#f0f0f0]{% endif %}">
              <a class="flex justify-center items-center h-full tracking-tight px-4 font-medium  " href="{% url 'main:main' %}">Dashboard</a>
          </li>
          <li class="h-full transition-all hover:bg-[#f0f0f0] text-center leading-tight  hover:border-b-[4px] hover:border-[#3b82f6] {% if request.resolver_match.url_name == 'request' %}border-[#3b82f6] border-b-[4px] bg-[#f0f0f0]{% endif %}">
              <a class="flex justify-center items-center h-full tracking-tight px-4 font-medium " href="{% url 'medical:request' %}">Documentary Request</a>
          </li>
          <li class="h-full transition-all hover:bg-[#f0f0f0] text-center leading-tight  hover:border-b-[4px] hover:border-[#3b82f6] {% if request.resolver_match.url_name == 'upload_requirements' %}border-[#3b82f6] border-b-[4px] bg-[#f0f0f0]{% endif %}">
              <a class="flex justify-center items-center h-full tracking-tight px-4 font-medium " href="{% url 'medical:upload_requirements' %}">Medical Requirements Upload</a>
          </li>
          <li class="h-full transition-all hover:bg-[#f0f0f0] text-center leading-tight hover:border-b-[4px] hover:border-[#3b82f6] {% if request.resolver_match.url_name == 'dentalservice' %}border-[#3b82f6] border-b-[4px] bg-[#f0f0f0]{% endif %}">
              <a class="flex justify-center items-center h-full tracking-tight px-4 font-medium " href="{% url 'medical:dentalservice' %}">Dental Services Availment</a>
          </li>
            <li class="flex items-center gap-2 ml-auto">
              <span class="font-semibold text-black text-center">{{ user.get_full_name|default:user.username }}</span>
              <a class="flex justify-center items-center h-full tracking-tight hover:bg-[#f0f0f0] px-4 font-medium hover:border-b-[4px] hover:border-[#3b82f6] transition-all text-blue-600 border border-blue-200 rounded" href="{% url 'main:logout' %}">Logout</a>
          </li>
          {% endif %}
        </ul>
        <svg
          id="toggleMenuBtn"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          class="xs:block lg:hidden size-8 self-center cursor-pointer mr-4"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
          />
        </svg>
      </nav>
      <section
        class="bg-[#E5F2FF] h-full w-full flex xs:p-4 lg:p-[1.5rem]{% if user.is_superuser or user.is_staff %} overflow-auto{% else %} justify-center items-center overflow-hidden{% endif %}"
      >
        {% block content %} {% endblock %}
      </section>
      <div
        id="sidebar-nav"
        class="absolute bg-[#fff] top-0 right-0 z-50 translate-x-full transition-all duration-300 h-full xs:w-[80%] md:w-1/2 p-4 flex flex-col gap-4"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="#000"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-5 close-btn cursor-pointer"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 18 18 6M6 6l12 12"
          />
        </svg>
        <nav class="h-fit">
          <ul class="flex flex-col gap-2">
            {% if user.is_superuser or user.is_staff %}
            <li class="menu-item border-b border-[#e6e6e6] flex">
              <a
                class="p-3 font-bold text-black w-full"
                href="{% url 'main:admin_dashboard' %}"
                >Dashboard</a
              >
            </li>
            <li class="menu-item border-b border-[#e6e6e6] flex">
              <a
                class="p-3 font-bold text-black w-full"
                href="{% url 'medical:patient_profile' %}"
                >Patient Profile</a
              >
            </li>
            <li class="menu-item border-b border-[#e6e6e6] flex">
              <a
                class="p-3 font-bold text-black w-full"
                href="{% url 'medical:viewrequest' %}"
                >View Requests</a
              >
            </li>
            <li class="menu-item border-b border-[#e6e6e6] flex">
              <a
                class="p-3 font-bold text-black w-full"
                href="{% url 'medical:medtracker' %}"
                >Medical Requirements Tracker</a
              >
            </li>
            <li class="menu-item border-b border-[#e6e6e6] flex">
              <a
                class="p-3 font-bold text-black w-full"
                href="{% url 'medical:emergency_asst' %}"
                >Emergency Health Assistance</a
              >
            </li>
            <li class="menu-item border-b border-[#e6e6e6] flex">
              <a
                class="p-3 font-bold text-black w-full"
                href="{% url 'medical:pwdlist' %}"
                >PWD Profile</a
              >
            </li>
            <li class="menu-item border-b border-[#e6e6e6] flex">
              <a
                class="p-3 font-bold text-black w-full"
                href="{% url 'medical:dentalrequest' %}"
                >Dental Services</a
              >
            </li>
            <li class="menu-item border-b border-[#e6e6e6] flex">
              <a
                class="p-3 font-bold text-black w-full"
                href="{% url 'medical:prescription' %}"
                >Prescription Issuance</a
              >
            </li>
            <li class="menu-item border-b border-[#e6e6e6] flex">
              <a
                class="p-3 font-bold text-black w-full"
                href="{% url 'medical:transactions' %}"
                >Transaction Reports</a
              >
            </li>
            <li class="menu-item border-b border-[#e6e6e6] flex">
              <a
                class="p-3 font-bold text-black w-full"
                href="{% url 'main:logout' %}"
                >Logout</a
              >
            </li>
            {% else %}
            <li class="menu-item border-b border-[#e6e6e6] flex">
              <a
                class="p-3 font-bold text-black w-full"
                href="{% url 'main:main' %}"
                >Dashboard</a
              >
            </li>
            <li class="menu-item border-b border-[#e6e6e6] flex">
              <a
                class="p-3 font-bold text-black w-full"
                href="{% url 'medical:request' %}"
                >Documentary Request</a
              >
            </li>
            <li class="menu-item border-b border-[#e6e6e6] flex">
              <a
                class="p-3 font-bold text-black w-full"
                href="{% url 'medical:upload_requirements' %}"
                >Medical Requirements Upload</a
              >
            </li>
            <li class="menu-item border-b border-[#e6e6e6] flex">
              <a
                class="p-3 font-bold text-black w-full"
                href="{% url 'medical:dentalservice' %}"
                >Dental Services Availment</a
              >
            </li>
            <li class="menu-item border-b border-[#e6e6e6] flex">
              <a
                class="p-3 font-bold text-black w-full"
                href="{% url 'main:logout' %}"
                >Logout</a
              >
            </li>
            {% endif %}
          </ul>
        </nav>
      </div>
      <div
        id="overlay"
        class="absolute top-0 right-0 bottom-0 left-0 h-full z-10 bg-[#00000050] hidden"
      ></div>
    </main>
    <script>
      const sidebar = document.querySelector("#sidebar-nav");
      const overlay = document.querySelector("#overlay");

      document.querySelector("#toggleMenuBtn").addEventListener("click", () => {
        sidebar.classList.replace("translate-x-full", "translate-x-0");
        overlay.classList.replace("hidden", "block");
      });

      document.querySelector(".close-btn").addEventListener("click", () => {
        sidebar.classList.replace("translate-x-0", "translate-x-full");
        overlay.classList.replace("block", "hidden");
      });

      document.querySelector(".menu-item").addEventListener("click", () => {
        sidebar.classList.replace("translate-x-0", "translate-x-full");
        overlay.classList.replace("block", "hidden");
      });
    </script>
    <script src="{% static 'scripts/jquery/jquery-3.7.1.min.js' %}"></script>
    <script src="{% static 'scripts/newmain.js' %}"></script>
    {% block extra_js %}{% endblock %}
    <!-- SweetAlert2 for Django messages -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    {% if messages %}
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        {% for message in messages %}
          Swal.fire({
            icon: '{% if "success" in message.tags %}success{% elif "error" in message.tags %}error{% elif "warning" in message.tags %}warning{% elif "info" in message.tags %}info{% else %}info{% endif %}',
            title: '',
            text: "{{ message|escapejs }}",
            timer: 2500,
            showConfirmButton: false
          });
        {% endfor %}
      });
    </script>
    {% endif %}
  </body>
</html>